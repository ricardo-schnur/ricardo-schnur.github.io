<!doctype html>
<html lang="de" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring Boot Projekt – Teil 4: Folgen einer Änderung am Domänenmodell und die Applikationsschicht | Ricardo&#x27;s Dev Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ricardo-schnur.github.io/hexagonal-architecture-java-spring-boot-part-4"><meta data-rh="true" property="og:locale" content="de"><meta data-rh="true" name="docusaurus_locale" content="de"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="de"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring Boot Projekt – Teil 4: Folgen einer Änderung am Domänenmodell und die Applikationsschicht | Ricardo&#x27;s Dev Blog"><meta data-rh="true" name="description" content="banner"><meta data-rh="true" property="og:description" content="banner"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-02-27T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/ricardo-schnur"><meta data-rh="true" property="article:tag" content="Domain-driven Design,Hexagonale Architektur,Softwarearchitektur,Softwareentwicklung"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://ricardo-schnur.github.io/hexagonal-architecture-java-spring-boot-part-4" hreflang="de"><link data-rh="true" rel="alternate" href="https://ricardo-schnur.github.io/hexagonal-architecture-java-spring-boot-part-4" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://www.colenet.de/blog/development/hexagonale-architektur-in-der-praxis-teil-4-aenderung-am-domanenmodell-und-applikationsschicht/"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Ricardo&#39;s Dev Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Ricardo&#39;s Dev Blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c2a98a3b.css">
<script src="/assets/js/runtime~main.d44eed94.js" defer="defer"></script>
<script src="/assets/js/main.ca346ef3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Zum Hauptinhalt springen"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Zum Hauptinhalt springen</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/profile.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ricardo&#x27;s Dev Blog</b></a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/ricardo-schnur" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/ricardo-schnur" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Umschalten zwischen dunkler und heller Ansicht (momentan heller Modus)" aria-label="Umschalten zwischen dunkler und heller Ansicht (momentan heller Modus)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Navigation der letzten Beiträge im Blog"><div class="sidebarItemTitle_pO2u margin-bottom--md">Neueste Beiträge</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/hexagonal-architecture-java-spring-boot-part-5">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring-Boot-Projekt – Teil 5: Anbindung der Datenbank (am Beispiel einer MongoDB)</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/hexagonal-architecture-java-spring-boot-part-4">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring Boot Projekt – Teil 4: Folgen einer Änderung am Domänenmodell und die Applikationsschicht</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/hexagonal-architecture-java-spring-boot-part-3">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring Boot Projekt – Teil 3: REST-Schnittstelle mit Antikorruptionsschicht</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/hexagonal-architecture-java-spring-boot-part-2">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring-Boot-Projekt – Teil 2: Modellierung, Kernlogik und In-Memory Cache</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/hexagonal-architecture-java-spring-boot-part-1">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring-Boot-Projekt – Teil 1: Projektbeschreibung, Setup und automatische Architekturtests</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="banner"><header><h1 class="title_f1Hy" itemprop="headline">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring Boot Projekt – Teil 4: Folgen einer Änderung am Domänenmodell und die Applikationsschicht</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-02-27T00:00:00.000Z" itemprop="datePublished">27. Februar 2024</time> · <!-- -->11 Minuten Lesezeit</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ricardo-schnur" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="img/profile.png" alt="Ricardo Schnur" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ricardo-schnur" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Ricardo Schnur</span></a></div><small class="avatar__subtitle" itemprop="description">Software Developer @ Colenet GmbH</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p><img decoding="async" loading="lazy" alt="banner" src="/assets/images/banner-f45034d23a133067a27eca2af8ac1a1f.webp" width="1031" height="592" class="img_ev3q"></p>
<blockquote>
<p>Ricardo zeigt uns in dieser Blog-Reihe die Vorteile von hexagonaler Architektur anhand der Entwicklung einer
To-Do-Listen-Anwendung. Im 4. Teil wird das Domänenmodell erweitert und die Applikationsschicht mit einer
geplanten Aufgabe gefüllt.</p>
</blockquote>
<!-- -->
<!-- -->
<p>Diese Artikel-Reihe ist der hexagonalen Architektur gewidmet: Wir möchten ihre Grundprinzipien verstehen und diese in
der Praxis erleben. Wir werden uns anschauen, wie sich eine hexagonale Architektur in einer typischen Webanwendung
praktisch realisieren lässt. Dazu werden wir Schritt für Schritt eine kleine <strong>To-do-Listen-Anwendung</strong> entwickeln, die
es
ermöglichen soll, Tasks anzulegen, angelegte Tasks anzuzeigen und Tasks als erledigt zu markieren. Die Anwendung wird
über eine REST-Schnittstelle bedienbar sein und die Tasks werden konfigurierbar entweder In-Memory oder persistent in
einer echten MongoDB verwaltet.</p>
<p><a href="https://ricardo-schnur.github.io/hexagonal-architecture-java-spring-boot-part-1" target="_blank" rel="noopener noreferrer">Im ersten Teil</a> dieser Serie haben wir
ein frisches Java/Spring-Boot-Projekt aufgesetzt und konfiguriert. Wir haben uns
überlegt, wie wir uns die Architektur der Anwendung und ihre Umsetzung vorstellen und diese Vorstellung mittels ArchUnit
in einem automatisierten Architekturtest festgehalten.</p>
<p><a href="https://ricardo-schnur.github.io/hexagonal-architecture-java-spring-boot-part-2" target="_blank" rel="noopener noreferrer">Im zweiten Teil</a> sind wir mit der
Modellierung der Domäne, der Implementierung der Kernlogik und der Datenhaltung der
Anwendung in die eigentliche Entwicklung gestartet.</p>
<p><a href="https://ricardo-schnur.github.io/hexagonal-architecture-java-spring-boot-part-3" target="_blank" rel="noopener noreferrer">Im dritten Teil</a> haben wir alle
grundlegenden Funktionalitäten unserer Anwendung implementiert, sodass diese bereits
nutzbar ist.</p>
<p>Nun möchten wir uns einerseits anschauen, welche Auswirkungen eine <strong>Anpassung am Domänenmodell</strong> auf die bestehende
Anwendung hat und außerdem die bis dato noch unbeachtete <strong>Applikationsschicht</strong> mit einer geplanten Aufgabe zum
regelmäßigen Senden von Benachrichtigungen füllen sowie der Möglichkeit, beim Anwendungsstart automatisch einige
Beispieltasks zu erzeugen.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Ihr findet den aktuellen Stand des Projekts sowie die Änderungen auch aus diesem Teil
auf <a href="https://github.com/ricardo-schnur/blog-post-hexagonal-architecture/tree/post4" target="_blank" rel="noopener noreferrer">GitHub</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="erweiterung-des-domänenmodells">Erweiterung des Domänenmodells<a href="#erweiterung-des-domänenmodells" class="hash-link" aria-label="Direkter Link zur Erweiterung des Domänenmodells" title="Direkter Link zur Erweiterung des Domänenmodells">​</a></h2>
<p>Unsere Anforderung soll recht simpel gehalten werden. Wir wollen unserem Task eine neue Eigenschaft
<em>Fälligkeitsdatum</em> hinzufügen. Hierbei soll es sich um eine optionale Eigenschaft handeln und sie soll sowohl bei
offenen als auch (zur Nachvollziehbarkeit) bei geschlossenen Tasks vorhanden sein.</p>
<p>In einem ersten Schritt wollen wir nur diese neue Eigenschaft hinzufügen und uns anschauen, an welchen Stellen
unserer Anwendung wir dazu alles Anpassungen vornehmen müssen. Im Anschluss daran werden wir unsere Anwendung dann um
automatische Fälligkeitsbenachrichtigungen erweitern.</p>
<p>Die Erweiterung unseres Modells gestaltet sich denkbar einfach - wir fügen lediglich die neue Eigenschaft in den
beiden <code>record</code>s <code>OpenTask</code> und <code>CompletedTask</code> hinzu. Außerdem nehmen wir sie in das Interface <code>Task</code> mit auf:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Task</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token class-name" style="color:#FAC863">UUID</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">id</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">description</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">dueDate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">record</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">OpenTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">UUID</span><span class="token plain"> id</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Task</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">record</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CompletedTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">UUID</span><span class="token plain"> id</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LocalDateTime</span><span class="token plain"> completionTime</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Task</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Jetzt können wir uns vom Typsystem und dem Compiler leiten lassen. Als Erstes fällt uns direkt auf, dass den
Konstruktoraufrufen in <code>TaskService</code> nun einen Parameter fehlt. Dies beheben wir, indem wir einerseits in
<code>withToggledCompletionState</code> den jeweils neuen Parameter mit übergeben</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Task</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">withToggledCompletionState</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Task</span><span class="token plain"> task</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">case</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">OpenTask</span><span class="token plain"> t </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CompletedTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">id</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">description</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">dueDate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LocalDateTime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">clock</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">case</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CompletedTask</span><span class="token plain"> t </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">OpenTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">id</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">description</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">dueDate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>und andererseits in <code>createTask</code> die Methodensignatur um einen entsprechenden Parameter erweitern und diesen
weiterreichen:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Task</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> taskRepository</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">OpenTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token constant" style="color:#5a9bcf">UUID</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">randomUUID</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Durch diese Signaturänderung wird nun natürlich der Aufruf dieser Methode aus <code>RestApiController</code> heraus ungültig.</p>
<p>Um das zu beheben, müssen wir uns ein wenig mehr anstrengen. Wir erweitern auch hier wieder
die Signatur, um den neuen Parameter auch im REST-Aufruf mitgeben zu können:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">ResponseEntity</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics operator" style="color:#d7deea">?</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token annotation punctuation" style="color:#8dc891">@RequestParam</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#8dc891">@RequestParam</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#8dc891">@Nullable</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Auffällig ist hier der Typ <code>@Nullable String</code>. Diesen wählen wir, damit unser Endpunkt auch weiterhin ohne
diesen Parameter aufrufbar ist und wir Serialisierbarkeit gewährleisten. Im Gegensatz dazu haben wir uns im
Domänenmodell für den Typ <code>Optional&lt;LocalDate&gt;</code> entschieden, der einerseits mit <code>LocalDate</code> spezifischer als
<code>String</code> ist und andererseits die Optionalität der Eigenschaft durch <code>Optional</code> explizit macht und dadurch Benutzer
dazu zwingt, damit umzugehen. Als Nächstes erweitern wir unseren <code>RestApiValidator</code>. Hier wollen wir die bestehende
Methode</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">Validation</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">validateDescription</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ablösen durch:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">Validation</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Seq</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Tuple2</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">validateCreateTaskParameters</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> dueDate</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Diese soll uns also im Erfolgsfall ein Tupel bestehend aus der, wie bisher validierten <code>description</code>, aber erweitert
um ein validiertes und in den erwarteten Typ umgewandeltes <code>dueDate</code> zurückgeben. Im Fehlerfall wollen wir
außerdem <code>Seq&lt;String&gt;</code> statt nur <code>String</code> zurückgeben, um gegebenenfalls für beide Validierungen eine
Fehlernachricht bereitstellen zu können. Bei <code>Seq</code> (für <em>Sequence</em>) handelt es sich hierbei um einen von Vavr
bereitgestellten Typ.</p>
<p>Hierzu bauen wir uns erst eine dedizierte Validierungsfunktion für das <code>dueDate</code>,
die uns entweder ein leeres <code>Optional</code> oder aber das geparste Datum liefert:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Validation</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">validateDueDate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">!</span><span class="token class-name" style="color:#FAC863">StringUtils</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">hasText</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Validation</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">valid</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">empty</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Try</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">success</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">mapTry</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">LocalDate</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">parse</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">of</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">toValidation</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">__ </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;Due date has to be in format yyyy-MM-dd: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Diese Methode kombinieren wir dann mit <code>validateDescription</code> zu:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Validation</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Seq</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Tuple2</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">String</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Optional</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">LocalDate</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">validateCreateTaskParameters</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> dueDate</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Validation</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">combine</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">validateDescription</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">description</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">validateDueDate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">ap</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Tuple</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">of</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Schließlich passen wir noch den Aufruf in <code>RestApiController::createTask</code> an, indem wir die bestehende Implementierung</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> restApiValidator</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">validateDescription</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">description</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">taskService</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">createTask</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">restApiMapper</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">toDto</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">fold</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">RestApiController</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">createBadRequestResponse</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">RestApiController</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">createOkResponse</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ersetzen durch:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> restApiValidator</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">validateCreateTaskParameters</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Function2</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">of</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">taskService</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">createTask</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">tupled</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">restApiMapper</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">toDto</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">mapError</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">messages </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">join</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;; &quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> messages</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">fold</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">RestApiController</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">createBadRequestResponse</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">RestApiController</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">createOkResponse</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Wir validieren also nun beide Parameter und reichen diese dann an den Service weiter. Im Fehlerfall konkatenieren
wir außerdem alle Nachrichten zu einer einzigen Nachricht, die wir dann in die Response aufnehmen.</p>
<p>Sofern wir auch unsere Testklassen entsprechend angepasst haben, ist unsere Anwendung nun wieder kompilierbar und
nutzbar. Auch ist es uns jetzt möglich, Tasks mit einem Fälligkeitsdatum via REST-Aufruf anzulegen. Auffällig ist aber,
dass alle Antworten unserer Endpunkte <em>kein</em> Fälligkeitsdatum mitliefern.</p>
<p>In erster Linie gilt hier aber völlig unironisch das Motto <em>It&#x27;s not a bug, it&#x27;s a feature.</em> Dieser Umstand zeigt
nämlich, dass wir <em>nicht</em> aus Versehen implizit unsere Schnittstelle verändert haben, sondern dies durch die
Entkopplung von <code>Task</code> zu <code>TaskDto</code> eine bewusste Entscheidung sein muss. Da wir besagte Änderung an dieser Stelle
aber natürlich gutheißen, fügen wir die neue Eigenschaft in einem letzten Schritt noch zu unserem Austauschmodell hinzu</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">record</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TaskDto</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> id</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> state</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">String</span><span class="token plain"> completionTime</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>und erweitern die Methode <code>RestApiMapper::toDto</code> um eine entsprechende Zeile:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">model</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">dueDate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">LocalDate</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">toString</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">orElse</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Damit enthalten schließlich auch alle Antworten unserer Endpunkte die neue Eigenschaft. Im folgenden Abschnitt
wollen wir das neu hinzugefügte Fälligkeitsdatum nutzen, um automatisiert Fälligkeitsbenachrichtigungen zu versenden.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="die-applikationsschicht-automatische-fälligkeitsbenachrichtigungen">Die Applikationsschicht: Automatische Fälligkeitsbenachrichtigungen<a href="#die-applikationsschicht-automatische-fälligkeitsbenachrichtigungen" class="hash-link" aria-label="Direkter Link zur Die Applikationsschicht: Automatische Fälligkeitsbenachrichtigungen" title="Direkter Link zur Die Applikationsschicht: Automatische Fälligkeitsbenachrichtigungen">​</a></h2>
<p>Auch hier wollen wir die Anforderungen zu Demonstrationszwecken möglichst simpel halten: Wir wollen in regelmäßigen
Abständen all unsere offenen Tasks anschauen, prüfen, ob das Fälligkeitsdatum überschritten ist, und in diesem Fall
eine Benachrichtigung senden. Dazu implementieren wir eine geplante Aufgabe mittels der von Spring
bereitgestellten <code>@Scheduled</code> Annotation und lassen diese in einem fixen Intervall laufen.</p>
<p>Solche geplanten Aufgaben sind ein typisches Beispiel für Code, den wir in der Applikationsschicht unterbringen.
Denn weder handelt es sich hierbei um Kernlogik, sodass die Domäne der falsche Ort dafür ist, noch haben wir hier
eine Anbindung an die Außenwelt, was für einen Adapter sprechen würde. Andere typische Themen, die in der
Applikationsschicht ihren Platz finden, sind etwa Transaktionsmanagement, die Zusammenführung mehrerer
Teile der Kernlogik zu einem Workflow oder einmalige Aufgaben, die beim Anwendungsstart erledigt werden müssen
(hierfür sehen wir später noch ein Beispiel).</p>
<p>Wir starten also mit einer neuen Klasse</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">de</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">colenet</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">hexagonal</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">todo</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">list</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">application</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">scheduler</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token annotation punctuation" style="color:#8dc891">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationScheduler</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>in der wir eine Methode</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token annotation punctuation" style="color:#8dc891">@Scheduled</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">fixedRateString </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;${notification.interval}&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> timeUnit </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TimeUnit</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token constant" style="color:#5a9bcf">SECONDS</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">sendDueNotifications</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>implementieren möchten. Das Benachrichtigungsintervall wollen wir hierbei
konfigurierbar halten und legen dafür den Parameter <code>notification.interval</code> in den <code>application.properties</code> an und
belegen diesen dort mit einem geeigneten Wert, etwa <code>notification.interval=60</code> für eine minütliche Benachrichtigung.</p>
<p>Außerdem müssen wir den Scheduling-Mechanismus von Spring überhaupt erst aktivieren, indem wir unsere
Einstiegsklasse mit <code>@EnableScheduling</code> annotieren:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token annotation punctuation" style="color:#8dc891">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token annotation punctuation" style="color:#8dc891">@EnableScheduling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">HexagonalToDoListApplication</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Damit haben wir die Grundlagen geschaffen und können uns jetzt dem Inhalt der Methode <code>sendDueNotifications</code> widmen.
Diese soll erst alle fälligen, offenen Tasks laden und dann für jede davon eine Benachrichtigung senden.</p>
<p>Zum Laden der Tasks erweitern wir unseren <code>TaskService</code> um eine Methode</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">List</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">OpenTask</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getAllOpenTasksWithDueDateBeforeOrEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">LocalDate</span><span class="token plain"> date</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Diese soll, wie der Name sagt, alle offenen Tasks zurückgeben, die ein Fälligkeitsdatum vor oder gleich dem
angegebenen Datum haben. Auf die genaue Umsetzung wollen wir an dieser Stelle nicht genau eingehen (wir würden dabei
nichts Neues sehen). Die Grundidee ist aber natürlich, auch eine entsprechende Methode im Repository anzubieten und
diese basierend auf unserem Cache umzusetzen. Die Details dazu könnt ihr euch gerne
im<a href="https://github.com/ricardo-schnur/blog-post-hexagonal-architecture/tree/post4" target="_blank" rel="noopener noreferrer">GitHub Repository</a> anschauen.</p>
<p>Das Senden der Benachrichtigungen wollen wir dann wiederrum in entsprechende Adapter auslagern. Dazu definieren wir
uns wie gehabt einen Port</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">de</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">colenet</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">hexagonal</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">todo</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">list</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">application</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">scheduler</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">de</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">colenet</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">hexagonal</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">todo</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">list</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">domain</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">model</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import namespace" style="opacity:0.7">task</span><span class="token import namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token import class-name" style="color:#FAC863">Task</span><span class="token import punctuation" style="color:#8dc891">.</span><span class="token import class-name" style="color:#FAC863">OpenTask</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationSender</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">sendDueNotification</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">OpenTask</span><span class="token plain"> task</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>den wir dann später durch einen konkreten Adapter realisieren.</p>
<p>Erst einmal sind wir jetzt aber in der Lage, den Scheduler zu vervollständigen:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token annotation punctuation" style="color:#8dc891">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationScheduler</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Logger</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LoggerFactory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getLogger</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">DueNotificationScheduler</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Clock</span><span class="token plain"> clock</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationSender</span><span class="token plain"> dueNotificationSender</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TaskService</span><span class="token plain"> taskService</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token class-name" style="color:#FAC863">DueNotificationScheduler</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Clock</span><span class="token plain"> clock</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationSender</span><span class="token plain"> dueNotificationSender</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TaskService</span><span class="token plain"> taskService</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">clock </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> clock</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">dueNotificationSender </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> dueNotificationSender</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">taskService </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> taskService</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#8dc891">@Scheduled</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">fixedRateString </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;${notification.interval}&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> timeUnit </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TimeUnit</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token constant" style="color:#5a9bcf">SECONDS</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">sendDueNotifications</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">info</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;Sending due notifications&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        taskService</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getAllOpenTasksWithDueDateBeforeOrEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">LocalDate</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">clock</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">forEach</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">dueNotificationSender</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">sendDueNotification</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">info</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;Finished sending due notifications&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Um auf den ersten Blick sehen zu können, wann unsere Aufgabe ausgeführt wird, haben wir hier außerdem noch ein paar
Logeinträge hinzugefügt.</p>
<p>Es fehlt uns jetzt also nur noch ein konkreter Adapter, der den eben definierten Port realisiert. Hierfür haben wir uns
alle Möglichkeiten offen gelassen: Wir könnten eine E-Mail versenden, unseren favorisierten Chat-Client wie etwa Slack
verwenden, Push-Benachrichtigungen auf Mobilgeräten erzeugen oder was auch immer wir sonst möchten.</p>
<p>Hier wählen wir aber die denkbar einfachste Variante und wollen als „Benachrichtigung” einfach den fälligen Task loggen.
Dazu registrieren wir zuerst in unserem Architekturtest einen neuen Adapter:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">adapter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;console&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getAdapterIdentifier</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;console&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Außerdem vervollständigen wir an dieser Stelle noch ein offenes To-do und entfernen folgende Zeile</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">withOptionalLayers</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// TODO Remove this as soon as our layers are filled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>denn all unsere Schichten sind inzwischen mit Inhalt gefüllt (mal abgesehen von dem gerade registrierten
<code>console</code>-Adapter, aber dazu kommen wir nun).</p>
<p>Wie bereits erwähnt wollen wir in diesem neuen Adapter einfach einen Logeintrag als Benachrichtigung erzeugen. Dazu
ist folgende Implementierung völlig ausreichend:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">de</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">colenet</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">hexagonal</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">todo</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">list</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">adapter</span><span class="token namespace punctuation" style="opacity:0.7;color:#8dc891">.</span><span class="token namespace" style="opacity:0.7">console</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// Omitted for clarity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token annotation punctuation" style="color:#8dc891">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationLogger</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DueNotificationSender</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Logger</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LoggerFactory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getLogger</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">DueNotificationLogger</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">sendDueNotification</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">OpenTask</span><span class="token plain"> task</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">warn</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;Task is due: {}&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> task</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Starten wir nun unsere Anwendung und legen uns einen offenen Task mit Fälligkeitsdatum in der Vergangenheit an
(etwa via <code>POST http://localhost:8080/tasks?description=Due&amp;dueDate=2023-07-01</code>), so sehen wir innerhalb kürzester
Zeit (natürlich abhängig vom Parameter <code>notification.interval</code>) folgende Logeinträge (zur Übersichtlichkeit aufs
Wesentliche reduziert):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">INFO: Sending due notifications</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">WARN: Task is due: OpenTask[id=5d3fcb2d-b8c9-47d2-9ba9-c95e7be05b65, description=Due, dueDate=Optional[2023-07-01]]</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">INFO: Finished sending due notifications</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Abschließend wollen wir noch aus Bequemlichkeit zum Anwendungsstart automatisch einige Beispieltasks anlegen, um
unsere neuen Benachrichtigungen sofort beobachten zu können, ohne manuell fällige Tasks anlegen zu müssen.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="erzeugung-von-beispieltasks">Erzeugung von Beispieltasks<a href="#erzeugung-von-beispieltasks" class="hash-link" aria-label="Direkter Link zur Erzeugung von Beispieltasks" title="Direkter Link zur Erzeugung von Beispieltasks">​</a></h2>
<p>Wie erwähnt handelt es sich auch hierbei um eine Aufgabe, die sich typischerweise in der Applikationsschicht ansiedelt.
Hierzu bauen wir uns lediglich eine neue Klasse <code>ExampleTaskCreator</code> in
<code>de.colenet.hexagonal.todo.list.application.startup</code>, die eine Handvoll <code>Task</code>-Objekte erzeugt und diese dann mittels
<code>TaskRepository::save</code> abspeichert. Außerdem wollen wir dieses Verhalten dynamisch ein- und ausschaltbar machen und
legen uns dazu eine neue Eigenschaft <code>startup.exampletasks.create</code> in den <code>application.properties</code> an, die wir mit
<code>true</code> vorkonfigurieren. Da wir diesen Prozess einmalig nach dem Anwendungsstart ausführen wollen, kennzeichnen wir
die entsprechende Methode außerdem mit <code>@EventListener(ApplicationReadyEvent.class)</code>. Alles in allem landen wir bei
folgender Implementierung:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token annotation punctuation" style="color:#8dc891">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token annotation punctuation" style="color:#8dc891">@ConditionalOnProperty</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">prefix </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;startup&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;exampletasks.create&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> havingValue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;true&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">ExampleTaskCreator</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Logger</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LoggerFactory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getLogger</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">ExampleTaskCreator</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TaskRepository</span><span class="token plain"> taskRepository</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token class-name" style="color:#FAC863">ExampleTaskCreator</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">TaskRepository</span><span class="token plain"> taskRepository</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">taskRepository </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> taskRepository</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#8dc891">@EventListener</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">ApplicationReadyEvent</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createExampleTasks</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">info</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;Creating some example tasks&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token class-name" style="color:#FAC863">Stream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">of</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CompletedTask</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                    </span><span class="token constant" style="color:#5a9bcf">UUID</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">randomUUID</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                    </span><span class="token string" style="color:#8dc891">&quot;[EXAMPLE] This task was completed yesterday&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                    </span><span class="token class-name" style="color:#FAC863">Optional</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">empty</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                    </span><span class="token class-name" style="color:#FAC863">LocalDateTime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">minusDays</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">1L</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token comment" style="color:#999999">// ... more example tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">forEach</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">taskRepository</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">save</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token constant" style="color:#5a9bcf">LOGGER</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">info</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;Example tasks successfully created&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ausblick">Ausblick<a href="#ausblick" class="hash-link" aria-label="Direkter Link zur Ausblick" title="Direkter Link zur Ausblick">​</a></h2>
<p>Damit sind wir fast am Ende der Reihe angelangt. Unsere Applikation beinhaltet nun jegliche beabsichtigte Funktionalität
und wir haben alle Schichten der hexagonalen Architektur in Verwendung gesehen.</p>
<p>In nächsten und gleichzeitig letzten Teil der Reihe wollen wir uns schließlich noch anschauen, wie wir unseren In-Memory
Cache durch eine echte, persistente Datenbank ersetzen können. Dazu werden wir exemplarisch eine MongoDB verwenden.
Konzeptuell lässt sich die Vorgehensweise aber natürlich auch auf andere Datenbanken übertragen.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/domain-driven-design">Domain-driven Design</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/hexagonale-architektur">Hexagonale Architektur</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/softwarearchitektur">Softwarearchitektur</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/softwareentwicklung">Softwareentwicklung</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog Post Seiten Navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/hexagonal-architecture-java-spring-boot-part-5"><div class="pagination-nav__sublabel">Neuer Post</div><div class="pagination-nav__label">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring-Boot-Projekt – Teil 5: Anbindung der Datenbank (am Beispiel einer MongoDB)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/hexagonal-architecture-java-spring-boot-part-3"><div class="pagination-nav__sublabel">Älterer Post</div><div class="pagination-nav__label">Hexagonale Architektur in der Praxis: Umsetzung in einem Java/Spring Boot Projekt – Teil 3: REST-Schnittstelle mit Antikorruptionsschicht</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#erweiterung-des-domänenmodells" class="table-of-contents__link toc-highlight">Erweiterung des Domänenmodells</a></li><li><a href="#die-applikationsschicht-automatische-fälligkeitsbenachrichtigungen" class="table-of-contents__link toc-highlight">Die Applikationsschicht: Automatische Fälligkeitsbenachrichtigungen</a></li><li><a href="#erzeugung-von-beispieltasks" class="table-of-contents__link toc-highlight">Erzeugung von Beispieltasks</a></li><li><a href="#ausblick" class="table-of-contents__link toc-highlight">Ausblick</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Ricardo Schnur</div></div></div></footer></div>
</body>
</html>